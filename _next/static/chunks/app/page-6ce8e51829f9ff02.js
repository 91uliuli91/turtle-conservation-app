(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8718:()=>{},9515:(e,s,a)=>{Promise.resolve().then(a.bind(a,9547))},9547:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});var i=a(5155),n=a(2619),c=a.n(n),r=a(9734);function l(){let{isOnline:e,pendingSyncs:s}=(0,r.j)();return(0,i.jsxs)("div",{className:"dashboard-container",children:[(0,i.jsxs)("div",{className:"sidebar",children:[(0,i.jsx)("div",{className:"logo",children:(0,i.jsxs)("svg",{width:"100",height:"40",viewBox:"0 0 100 40",children:[(0,i.jsx)("path",{d:"M12,15 L30,15 L24,27 L12,27 Z",fill:"#2dbf78"}),(0,i.jsx)("text",{x:"38",y:"27",fill:"#262A39","font-size":"20","font-weight":"bold",children:"TurtleTrack"})]})}),(0,i.jsxs)("div",{className:"nav-menu",children:[(0,i.jsxs)(c(),{href:"/",className:"nav-item active",children:[(0,i.jsx)("i",{className:"fas fa-home"}),(0,i.jsx)("span",{children:"Dashboard"})]}),(0,i.jsxs)(c(),{href:"/formulario",className:"nav-item",children:[(0,i.jsx)("i",{className:"fas fa-clipboard-list"}),(0,i.jsx)("span",{children:"Nuevo Evento"})]}),(0,i.jsxs)(c(),{href:"/mapa",className:"nav-item",children:[(0,i.jsx)("i",{className:"fas fa-map-marked-alt"}),(0,i.jsx)("span",{children:"Mapa de Eventos"})]}),(0,i.jsxs)(c(),{href:"/especies",className:"nav-item",children:[(0,i.jsx)("i",{className:"fas fa-paw"}),(0,i.jsx)("span",{children:"Especies"})]}),(0,i.jsxs)(c(),{href:"/estadisticas",className:"nav-item",children:[(0,i.jsx)("i",{className:"fas fa-chart-bar"}),(0,i.jsx)("span",{children:"Estad\xedsticas"})]}),(0,i.jsxs)(c(),{href:"/configuracion",className:"nav-item",children:[(0,i.jsx)("i",{className:"fas fa-cog"}),(0,i.jsx)("span",{children:"Configuraci\xf3n"})]})]}),(0,i.jsxs)("div",{className:"premium-box",children:[(0,i.jsx)("h3",{children:"Modo Investigador"}),(0,i.jsx)("button",{className:"premium-btn",children:"Activar"})]})]}),(0,i.jsxs)("div",{className:"main-content",children:[(0,i.jsxs)("div",{className:"header",children:[(0,i.jsxs)("div",{className:"welcome-section",children:[(0,i.jsx)("p",{className:"greeting",children:"Buen d\xeda, Bi\xf3logo"}),(0,i.jsx)("h1",{className:"welcome-title",children:"Resumen de Conservaci\xf3n"})]}),(0,i.jsxs)("div",{className:"header-right",children:[(0,i.jsxs)("div",{className:"status-indicator ".concat(e?"online":"offline"),children:[(0,i.jsx)("i",{className:"fas ".concat(e?"fa-wifi":"fa-wifi-slash")}),(0,i.jsx)("span",{children:e?"En l\xednea":"Offline"}),s>0&&(0,i.jsx)("div",{className:"sync-indicator",children:s})]}),(0,i.jsx)("div",{className:"user-profile",children:(0,i.jsx)("img",{src:"https://i.pravatar.cc/100?img=8",alt:"Bi\xf3logo",className:"profile-pic"})}),(0,i.jsxs)("div",{className:"search-bar",children:[(0,i.jsx)("i",{className:"fas fa-search"}),(0,i.jsx)("input",{type:"text",placeholder:"Buscar eventos..."})]})]})]}),(0,i.jsxs)("div",{className:"dashboard-container-grid",children:[(0,i.jsxs)("div",{className:"dashboard-main",children:[(0,i.jsxs)("div",{className:"stats-cards",children:[(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("div",{className:"card-icon",children:(0,i.jsx)("i",{className:"fas fa-egg"})}),(0,i.jsx)("p",{className:"card-title",children:"Nidos Registrados"}),(0,i.jsx)("h2",{className:"card-amount",children:"24"}),(0,i.jsx)("div",{className:"card-trend positive",children:"+12% este mes"})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("div",{className:"card-icon",children:(0,i.jsx)("i",{className:"fas fa-turtle"})}),(0,i.jsx)("p",{className:"card-title",children:"Tortugas Avistadas"}),(0,i.jsx)("h2",{className:"card-amount",children:"156"}),(0,i.jsx)("div",{className:"card-trend positive",children:"+8% este mes"})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("div",{className:"card-icon",children:(0,i.jsx)("i",{className:"fas fa-baby"})}),(0,i.jsx)("p",{className:"card-title",children:"Cr\xedas Liberadas"}),(0,i.jsx)("h2",{className:"card-amount",children:"1,240"}),(0,i.jsx)("div",{className:"card-trend positive",children:"+15% este mes"})]})]}),(0,i.jsxs)("div",{className:"campaign-card",children:[(0,i.jsxs)("div",{className:"campaign-info",children:[(0,i.jsx)("h2",{className:"campaign-title",children:"Temporada de Anidaci\xf3n 2024"}),(0,i.jsx)("p",{className:"campaign-desc",children:"Estamos en el pico de la temporada de anidaci\xf3n. Mant\xe9n un registro detallado de cada evento para mejorar nuestros programas de conservaci\xf3n."}),(0,i.jsx)(c(),{href:"/formulario",children:(0,i.jsxs)("button",{className:"campaign-btn",children:[(0,i.jsx)("i",{className:"fas fa-plus"}),"Registrar Nuevo Evento"]})})]}),(0,i.jsxs)("div",{className:"turtle-card",children:[(0,i.jsx)("div",{className:"card-overlay"}),(0,i.jsxs)("div",{className:"card-brand",children:[(0,i.jsx)("div",{className:"card-type",children:"Campamento Tamul"}),(0,i.jsx)("div",{className:"card-logo",children:(0,i.jsx)("i",{className:"fas fa-water"})})]}),(0,i.jsxs)("div",{className:"card-stats",children:[(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("span",{children:"Especies Activas"}),(0,i.jsx)("strong",{children:"3"})]}),(0,i.jsxs)("div",{className:"stat-item",children:[(0,i.jsx)("span",{children:"Km de Playa"}),(0,i.jsx)("strong",{children:"7.2"})]})]}),(0,i.jsxs)("div",{className:"card-details",children:[(0,i.jsxs)("div",{className:"detail-item",children:[(0,i.jsx)("div",{className:"detail-label",children:"EQUIPO ACTIVO"}),(0,i.jsx)("div",{className:"detail-value",children:"8 Bi\xf3logos"})]}),(0,i.jsxs)("div",{className:"detail-item",children:[(0,i.jsx)("div",{className:"detail-label",children:"TEMP. ACTUAL"}),(0,i.jsx)("div",{className:"detail-value",children:"28.5\xb0C"})]})]})]})]}),(0,i.jsxs)("div",{className:"events-section",children:[(0,i.jsxs)("div",{className:"event-card",children:[(0,i.jsx)("h3",{className:"section-title",children:"Eventos Recientes"}),(0,i.jsxs)("div",{className:"event-item",children:[(0,i.jsx)("div",{className:"event-icon",children:(0,i.jsx)("i",{className:"fas fa-egg"})}),(0,i.jsxs)("div",{className:"event-content",children:[(0,i.jsx)("div",{className:"event-title",children:"Anidaci\xf3n - Tortuga Verde"}),(0,i.jsxs)("div",{className:"event-time",children:[(0,i.jsx)("i",{className:"far fa-clock"})," Hoy, 14:45 - Playa Norte"]})]}),(0,i.jsx)("div",{className:"event-badge success",children:"+85 huevos"})]}),(0,i.jsxs)("div",{className:"event-item",children:[(0,i.jsx)("div",{className:"event-icon",children:(0,i.jsx)("i",{className:"fas fa-turtle"})}),(0,i.jsxs)("div",{className:"event-content",children:[(0,i.jsx)("div",{className:"event-title",children:"Arqueo - Tortuga Carey"}),(0,i.jsxs)("div",{className:"event-time",children:[(0,i.jsx)("i",{className:"far fa-clock"})," Ayer, 16:08 - Zona B"]})]}),(0,i.jsx)("div",{className:"event-badge info",children:"Mediciones"})]})]}),(0,i.jsxs)("div",{className:"event-card",children:[(0,i.jsx)("h3",{className:"section-title",children:"Actividad del Equipo"}),(0,i.jsxs)("div",{className:"event-item",children:[(0,i.jsx)("div",{className:"event-icon",children:(0,i.jsx)("img",{src:"https://i.pravatar.cc/100?img=12",alt:"Mar\xeda Gonz\xe1lez"})}),(0,i.jsxs)("div",{className:"event-content",children:[(0,i.jsx)("div",{className:"event-title",children:"Mar\xeda Gonz\xe1lez"}),(0,i.jsxs)("div",{className:"event-time",children:[(0,i.jsx)("i",{className:"far fa-clock"})," Hoy, 09:35 - 3 eventos"]})]}),(0,i.jsx)("div",{className:"event-badge primary",children:"Activa"})]}),(0,i.jsxs)("div",{className:"event-item",children:[(0,i.jsx)("div",{className:"event-icon",children:(0,i.jsx)("img",{src:"https://i.pravatar.cc/100?img=11",alt:"Carlos Ruiz"})}),(0,i.jsxs)("div",{className:"event-content",children:[(0,i.jsx)("div",{className:"event-title",children:"Carlos Ruiz"}),(0,i.jsxs)("div",{className:"event-time",children:[(0,i.jsx)("i",{className:"far fa-clock"})," Ayer - 5 eventos"]})]}),(0,i.jsx)("div",{className:"event-badge warning",children:"Descanso"})]})]})]})]}),(0,i.jsxs)("div",{className:"dashboard-sidebar",children:[(0,i.jsxs)("div",{className:"metrics-card",children:[(0,i.jsx)("h3",{className:"metrics-title",children:"M\xe9tricas Mensuales"}),(0,i.jsx)("div",{className:"metrics-amount",children:"24.7%"}),(0,i.jsx)("div",{className:"metrics-subtitle",children:"Tasa de \xc9xito"}),(0,i.jsxs)("div",{className:"time-filter",children:[(0,i.jsx)("button",{className:"time-option",children:"D\xeda"}),(0,i.jsx)("button",{className:"time-option",children:"Semana"}),(0,i.jsx)("button",{className:"time-option active",children:"Mes"}),(0,i.jsx)("button",{className:"time-option",children:"A\xf1o"})]}),(0,i.jsx)("div",{className:"chart-container",children:(0,i.jsxs)("div",{className:"chart-placeholder",children:[(0,i.jsx)("i",{className:"fas fa-chart-line"}),(0,i.jsx)("p",{children:"Gr\xe1fico de m\xe9tricas"})]})}),(0,i.jsxs)("div",{className:"timeline",children:[(0,i.jsx)("div",{className:"month",children:"Sep"}),(0,i.jsx)("div",{className:"month",children:"Oct"}),(0,i.jsx)("div",{className:"month",children:"Nov"}),(0,i.jsx)("div",{className:"month active",children:"Dic"}),(0,i.jsx)("div",{className:"month",children:"Ene"})]})]}),(0,i.jsxs)("div",{className:"alert-card",children:[(0,i.jsxs)("div",{className:"alert-info",children:[(0,i.jsx)("div",{className:"alert-title",children:"Alerta de Marea"}),(0,i.jsx)("div",{className:"alert-status",children:"Alta"})]}),(0,i.jsxs)("div",{className:"alert-content",children:[(0,i.jsx)("p",{children:"Marea alta esperada para las 18:30"}),(0,i.jsx)("div",{className:"alert-time",children:"En 2 horas 15 min"})]})]}),(0,i.jsxs)("div",{className:"weather-card",children:[(0,i.jsxs)("div",{className:"weather-info",children:[(0,i.jsx)("div",{className:"weather-temp",children:"28\xb0C"}),(0,i.jsx)("div",{className:"weather-desc",children:"Soleado"})]}),(0,i.jsx)("div",{className:"weather-icon",children:(0,i.jsx)("i",{className:"fas fa-sun"})})]})]})]})]})]})}a(8718)},9734:(e,s,a)=>{"use strict";a.d(s,{j:()=>d});var i=a(2115),n=a(3278);class c extends n.Ay{constructor(){super("TurtleConservationDB"),this.version(2).stores({eventos:"++id, tipo_evento, fecha_hora, sincronizado, createdAt, coordenada_lat, coordenada_lon"}),this.on("populate",()=>{console.log("Base de datos offline inicializada")})}}let r=new c,l=async()=>{try{return await r.open(),console.log("✅ Base de datos offline conectada"),!0}catch(e){return console.error("❌ Error conectando a la base de datos offline:",e),!1}},t=async e=>{let s=await fetch("/api/API_routes/eventos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tipo_evento:e.tipo_evento,fecha_hora:e.fecha_hora,campamento_id:e.campamento_id,zona_playa:e.zona_playa,coordenada_lat:e.coordenada_lat,coordenada_lon:e.coordenada_lon,tortuga_id:e.tortuga_id,personal_registro_id:1,observaciones:e.observaciones})});if(!s.ok)throw Error("Error ".concat(s.status,": ").concat(s.statusText));return s.json()},d=()=>{let[e,s]=(0,i.useState)(!0),[a,n]=(0,i.useState)(0),[c,d]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{try{await l(),d(!0);let e=await r.eventos.where("sincronizado").equals(0).count();n(e)}catch(e){console.error("Error inicializando DB:",e)}})()},[]),(0,i.useEffect)(()=>{s(navigator.onLine);let e=()=>{console.log("\uD83D\uDFE2 Conexi\xf3n restaurada"),s(!0)},a=()=>{console.log("\uD83D\uDD34 Sin conexi\xf3n"),s(!1)};return window.addEventListener("online",e),window.addEventListener("offline",a),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",a)}},[]);let o=async e=>{if(!c)throw Error("Base de datos no inicializada");try{let s=(e=>{var s,a;return{tipo_evento:e.type||"unknown",fecha_hora:new Date,coordenada_lat:Number(null==(s=e.location)?void 0:s.lat)||0,coordenada_lon:Number(null==(a=e.location)?void 0:a.lon)||0,detalles:e.details||{},fotos:Array.isArray(e.photos)?e.photos:[],observaciones:e.observations||null,campamento_id:null,zona_playa:null,tortuga_id:null,sincronizado:0,createdAt:new Date}})(e),a=await r.eventos.add(s);return n(e=>e+1),a}catch(e){throw console.error("Error guardando offline:",e),e}},m=async()=>{if(!e||!c)return void console.log("No hay conexi\xf3n o DB no lista, no se puede sincronizar");try{let e=await r.eventos.where("sincronizado").equals(0).toArray();for(let s of(console.log("Sincronizando ".concat(e.length," eventos pendientes...")),e))try{await t(s),await r.eventos.update(s.id,{sincronizado:1}),n(e=>e-1),console.log("✅ Evento ".concat(s.id," sincronizado"))}catch(e){console.error("Error sincronizando evento ".concat(s.id,":"),e)}}catch(e){console.error("Error obteniendo eventos pendientes:",e)}};return(0,i.useEffect)(()=>{e&&a>0&&(console.log("Conexi\xf3n recuperada, sincronizando eventos pendientes..."),m())},[e]),{isOnline:e,pendingSyncs:a,saveEventOffline:o,syncPendingEvents:m,countPendingEvents:async()=>{try{let e=await r.eventos.where("sincronizado").equals(0).count();return n(e),e}catch(e){return console.error("Error contando eventos pendientes:",e),0}},getPendingEvents:async()=>{try{return await r.eventos.where("sincronizado").equals(0).toArray()}catch(e){return console.error("Error obteniendo eventos pendientes:",e),[]}}}}}},e=>{e.O(0,[847,278,619,441,255,358],()=>e(e.s=9515)),_N_E=e.O()}]);